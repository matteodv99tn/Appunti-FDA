\chapter{Automatica e sistemi}

	\begin{concetto}
		\textit{L'\textbf{automatica} è la disciplina che studia come agire su un sistema in modo che il suo comportamento assomigli a quello desiderato, senza necessità  di intervento manuale}.
	\end{concetto}
	Di fatto lo scopo di questo corso è quello di capire come un sistema da controllare si comporta e studiare un opportuno controllore in grado da fornire dei risultati accettabili.
	
\section{Sistema di controllo}
	\subsection{Sistema}
	
		\begin{concetto}
			L'automatica si basa sullo studio di \textbf{sistemi}, ossia un insieme di elementi fisici o concettuali il cui comportamento cambia nel tempo e/o spazio e che interagiscono con il mondo circostante. I sistemi, come mostrati in figura \ref{sistema}, sono modellati come delle \textit{black box} le cui interazioni con l'ambiente esterno sono rappresentate dai rami, ossia le frecce entranti/uscenti: in particolare si osservano
			\begin{itemize}
			    \item gli \textbf{ingressi di controllo}  $u$ (o semplicemente \textbf{ingressi}) i valori in ingresso al sistema che potranno essere modificati a piacimento dal controllore;
			    \item gli \textbf{ingressi di disturbo} $d$, ossia valori la cui evoluzione non può essere influenzata e in generale dei quali non è conosciuto l'andamento;
			    \item le \textbf{uscite} $y$ del sistema che descrivono la sua evoluzione e che dunque possono influenzare l'ambiente con il quale interagiscono.
			\end{itemize}
		\end{concetto}

    	\figuratikz{4}{1}{sistema}{schema di un sistema.}{sistema}
    	
    	In molti casi la scelta di catalogare una variabile come ingresso o uscita è puramente arbitraria e deve essere contestualizzata al problema da risolvere. Considerando l'esempio di un'automobile, la coppia motrice può essere considerata come un'uscita se si considera che essa derivata dal motore che si interfaccia sul veicolo e che è determinata da ingressi quali la quantità di carburante, temperatura dell'aria ecc. Tuttavia la stessa coppia motrice può anche essere considerata come un ingresso che l'automobile utilizza per seguire la sua traiettoria.
    	
    \subsection{Controllo}
        \begin{concetto}
                Il \textbf{controllore} è la \textit{black box} che rappresenta il controllo automatico, ossia che descrive l'azione che deve essere applicata al sistema per farlo evolvere come desiderato. Il controllore, mostrato in figura \ref{controllore}, è del tutto similare come rappresentazione ad un sistema, dove tuttavia come rami in ingresso si osserva la \textbf{specifica del problema} $\overline y$, ossia il valore di \textbf{riferimento} al quale deve tendere a regime il sistema, mentre in uscita si ha l'\textbf{azione di controllo} $u$ del controllore $C$ sul sistema $S$. Altri ingressi sono connotati generalmente dalla variabile $i$.
         \end{concetto}
    	
    	\figuratikz{4}{1}{controllo}{schema di un controllore.}{controllore}
    	
    	Idealmente la \textbf{variabile controllata} (ossia l'uscita $y$ del sistema $S$) deve essere pari al segnale di riferimento $\overline y$ in ogni condizione, ossia indipendentemente dal rumore $n$ e dai disturbi $d$ che agiscono sull'insieme di controllore e sistema. Tuttavia per modellare più \textit{correttamente} l'andamento reale in generale l'obbiettivo del controllo è quello di minimizzare l'errore $e$ del sistema:
    	\begin{equation}
    	    \underbrace{\textrm{errore}}_e = \underbrace{\textrm{valore di riferimento}}_{\overline y} - \underbrace{\textrm{variabile controllata}}_y
    	\end{equation}
    	
    	Spesso i limiti delle specifiche di controllo sono limitate dalla grandezza della variabile di controllo stessa: per esempio una Fiat non potrà mai accelerare come una Ferrari per via del motore che è implementato sulla stessa.
    	
    \subsection{Sistema di controllo}
        \begin{concetto}
            Un opportuno collegamento tra controllore $C$ e sistema $S$ determina dunque il \textbf{sistema di controllo} (figura \ref{fig:sis:anelli}); questo nuovo sistema contiene praticamente tutti gli elementi fin'ora visti, ossia in particolare il valore di riferimento $\overline y$, la variabile di controllo $u$ che si interfaccia sul sistema e l'uscita $y$ del sistema, ossia la \textbf{variabile da controllare}.
            
            E' inoltre possibile classificare i sistemi di controllo in base alla topologia degli stessi, in particolare si parla di \textbf{anello aperto} quando le uscite del sistema $y$ non sono poste in retroazione alla variabile di riferimento, mentre quando ciò avviene si parla di controllo in \textbf{anello chiuso}.
        \end{concetto}
        
        \begin{figure}[bht]
        	\centering 
        	\begin{subfigure}{0.48\linewidth}
        		\centering
        		\resizebox{0.98\linewidth}{!}{\tikzfig{Immagini/sistema-controllo-a}} \caption{}
        	\end{subfigure}
	        \begin{subfigure}{0.48\linewidth}
		        \centering
		        \resizebox{0.98\linewidth}{!}{\tikzfig{Immagini/sistema-controllo-b}} \caption{}
		    \end{subfigure}
	    	\caption{esempio di sistema di controllo in anello aperto (a) e in anello chiuso (b).}
	    	\label{fig:sis:anelli}
        \end{figure}
            	
        Come si osserverà un sistema in anello aperto per poter funzionare \textit{correttamente} deve conoscere perfettamente il funzionamento del sistema e i parametri dello stesso, mentre un sistema in anello chiuso, seppur più complesso (in quanto prevede il montaggio di sensori e algoritmo di controllo più sofisticati), permette di ottenere prestazioni sensibilmente \textit{migliori}, immuni da incertezze e interferenze esterne.
    	
    	\begin{concetto}
    		Il \textbf{problema di controllo} è quello dunque di determinare le variabili di controllo $u$ affinché le variabili da controllare siano simili al segnale di riferimento per ogni possibile \textit{traiettoria} del riferimento $\overline y$ e dei disturbi $d$:
    		\[ y\simeq \overline y \]
    	\end{concetto}
    
\section{Classificazione dei sistemi}
	Come fin'ora visto, i sistemi (e i controlli) possono essere assimilati a delle black box caratterizzate dagli ingressi $u$ e le uscite $y$. In un sistema è possibile individuare sia deii \textbf{parametri}, ossia delle quantità che descrivono la struttura e le proprietà del sistema (come la massa o la geometria di un corpo) che tendenzialmente sono tempo-invarianti, sia delle \textbf{variabili}, ossia delle grandezze che descrivono l'evoluzione nel tempo del sistema (come posizione e velocità del corpo).
	
	A questo punto è dunque fondamentale \textbf{classificare} i vari sistemi nei cosiddetti \textit{\textbf{assi di classificazione}}, ossia una serie di connotazioni non esclusive che permettono di categorizzare i vari tipi di sistemi.
	
	\subsubsection{MIMO e SISO}
		Questo asse di classificazione è caratterizzato dagli acronimi \textit{Multi-Input Multi-Output} MIMO e \textit{Single-Input Single-Output} SISO; come si può evincere dalla traduzione dall'inglese, un sistema MIMO presenta un numero multiplo sia di ingressi $u$ che di uscite $y$ e dunque tali valori possono essere rappresentati da un vettore. Al contrario un sistema SISO presenta un solo valore in ingresso $u$ e un'uscita $y$, e dunque possono essere descritti solamente da un valore scalare.
		
		In particolare le $n$ uscite di un sistema MIMO sono collegate agli $m$ ingressi dello stesso secondo delle relazioni funzionali $f_i$ secondo che possono essere espresse come
		\begin{align*}
			y_1 & = f_1\big(u_1, u_2,\dots, u_m\big) \\
			y_2 & = f_2\big(u_1, u_2,\dots, u_m\big) \\
			& \ \vdots \\
			y_n & = f_n\big(u_1, u_2,\dots, u_m\big) 
		\end{align*}
	
	\subsubsection{Sistemi lineari e non lineari}
		Un \textbf{sistema} è detto \textbf{lineare} se rispetta le condizioni di linearità tra ingresso e uscita, ossia se nota l'uscita $f(u_1), f(u_2)$ per due ingressi noti $u_1,u_2$, allora l'uscita $f(u)$ di un ingresso ottenuto come combinazione lineare di $u_1,u_2$ deve essere la stessa combinazione lineare delle due uscite; in termini matematici una funzione per essere lineare deve essere tale che
		\[ u = \alpha_1 u_1 + \alpha_2 u_2 \qquad \Rightarrow \quad f(u) = \alpha_1 f(u_1) + \alpha_2 f(u_2) \]
    	Ogni qualvolta questa condizione non venisse rispettata, il \textbf{sistema} è semplicemente detto \textbf{non lineare}.
    
    	\paragraph{Rappresentazione matriciale per sistemi lineari} In generale un sistema lineare di tipo mimo può essere espresso come un sistema di equazioni lineari del tipo
    	\[\begin{cases}
    		y_1 = k_{11} u_1 + \dots + k_{1m} u_m \\
    		\ \vdots \\ 
    		y_n = k_{n1} u_1 + \dots + k_{nm} u_m
    	\end{cases}\]
    	Per come visto in algebra lineare è altresì possibile convertire tale sistema in \textit{notazione algebrica} in un sistema rappresentato in forma matriciale dal vettore $\boldsymbol u$ degli ingressi e $\boldsymbol y$ delle uscite e dalla matrice dei coefficienti $\mathcal K$:
    	\[ \boldsymbol{y} = \mathcal K \boldsymbol{u} \qquad \leftrightarrow\qquad \begin{pmatrix}
    		y_1 \\ \vdots \\ y_n
    	\end{pmatrix} = \begin{bmatrix}
    		k_{11} & \dots & k_{1m} \\ 
    		\vdots & \ddots \\
    		k_{n1} & & k_{nm}
    	\end{bmatrix} \begin{pmatrix}
    		u_1 \\ \vdots \\ u_m
    	\end{pmatrix}\]
    	\begin{osservazione}
    		In seguito non verrà più rappresentata alcuna differenza tra la rappresentazione degli ingressi $u$ e uscite $y$ come scalari o vettori, in quanto i due comportamenti per sistemi lineari sono analoghi.
    	\end{osservazione}
    	
    \subsubsection{Sistemi a tempo continuo e a tempo discreto}
    	Nei \textbf{sistemi a tempo continuo} le variabili evolvo, per l'appunto, con continuità nel tempo $t$, mentre i \textbf{sistemi a tempo discreto} presentano variabili che mutano solamente in corrispondenza di tempi $k\in \mathds Z$ che possono assumere solamente valori discreti interi.
    	
    	In generale i sistemi a tempo discreto derivano o dall'approssimazione di sistemi a tempo continuo oppure da sistemi dinamici (tendenzialmente concettuali) che nativamente devono prevedere una successione di eventi ad intervalli (come per esempio un algoritmo di calcolo di zeri di funzione tramite il metodo di Newton).
    	
    \subsubsection{Sistemi tempo varianti e tempo invarianti}
    	Sono detti \textbf{sistemi tempo varianti} tutti quei sistemi per cui il funzionale $f$ che lega l'uscita con l'ingresso dipende esplicitamente dal tempo, ossia assume una \textit{forma} del tipo
    	\[  y = f(u,t)\]
    	Un esempio di questo tipo di sistema è dato dalla funzione $f(u,t) = u^2 + 2t$.
    	
    	Al contrario se la funzione $f$ è indipendente dal tempo $t$, allora il \textbf{sistema} è detto \textbf{tempo invariante} ed è rappresentato da una relazione del tipo
    	\[ y = f(u) \]
    	Un esempio di questo tipo di sistema è dato dalla relazione $f(u) = e^u + 2u^3$.
    	
    	\begin{osservazione}
    		La (in)varianza del sistema rispetto al tempo è riferita solamente rispetto al funzionale $f$ che lega in generale l'ingresso con l'uscita, ma non all'ingresso $u$ che può variare nel tempo per stabilire la \textit{dinamica} del sistema!
    	\end{osservazione}
    
   	\subsubsection{Sistemi statici e sistemi dinamici}
   		La distinzione tra sistemi statici e dinamici è la più importante in quanto ci permette di capire meglio come approcciare l'analisi del sistema.
    	
    	\begin{concetto}
    		Un \textbf{sistema} è detto \textbf{statico} se la relazione tra ingresso è uscita è descritta da un'equazione algebrica del tipo $$y=f(u)$$
    		Intuitivamente ciò significa che per determinare l'uscita $y$ ad un istante generico di tempo $t^*$ è sufficiente conoscere il valore dell'ingresso $u^*$ in tale istante: in questo modo la \textit{storia} degli ingressi è ininfluente sulla determinazione dell'uscita e per questo tali sistemi sono detti \textbf{\textit{memory-less}}.
    	\end{concetto}
    	\begin{concetto}
    		Al contrario di quanto appena affermato, sono detti \textbf{sistemi dinamici} tutti quei sistemi rispetto ai quali per determinare il valore dell'uscita $y$ al tempo $t^*$ non è sufficiente conoscere solamente l'ingresso $u(t^*)$, ma anche tutto il pregresso temporale dell'ingresso $u(t)$ nell'intervallo di tempo compreso tra l'origine dei tempi $t_0$ e il tempo in questione $t^*$. Matematicamente questo tipo di sistemi è dunque governato non da un'equazione algebrica ma da un'\textbf{equazione differenziale} (ordinarie).
    		
    		Per questi sistemi sono dette \textbf{variabili di stato}, generalmente indicate come $x$, quelle variabili che occorre conoscere all'istante $t_0$ (insieme alla storia degli ingressi $u(t)$) per determinare univocamente l'uscita $y(t^*)$.
    	\end{concetto}
    
\section{Spazio di stato e sua rappresentazione}
	\begin{concetto}
		La \textit{metodologia universale} per descrivere i sistemi dinamici è basata sulla \textbf{rappresentazione in spazio di stato} del sistema stesso. Questa metodologia si basa sulla scrittura di una serie di \textbf{equazioni di stato} $f$ che relazionano la derivata prima $\dot x$ di una variabile di stato con le variabili di stato (non derivate), gli ingressi e il tempo secondo delle relazioni del tipo
		\[ \dot x = f( x,u,t)\]
		Per completare la rappresentazione è inoltre necessario scrivere anche le \textbf{trasformazioni d'uscita} $g$ che legano le uscite $y$ con le variabili di stato, gli ingressi e il tempo con una relazione del tipo
		\[ y = g(x,u,t)  \]
	\end{concetto}
	\begin{osservazione}
		Se il sistema prevede $n$ variabili di stato, allora sarà necessario scrivere un numero uguale di equazioni di stato $f_i$, una per ogni variabile. In modo analogo in presenza di $m$ uscite del sistema, sarà necessario determinare altrettante trasformazioni. Il tutto si basa sul fatto che $u,x,y$ possono rappresentare dei vettori ma anche degli scalari.
	\end{osservazione}
	Noto il numero $n$ di equazioni differenziali che è possibile individuare in un sistema dinamico, allora tale numero prende il nome di \textbf{ordine del sistema} e rappresenta il numero di variabili di stato $x$ che devono essere utilizzate nell'analisi per descrivere completamente il sistema stesso.
	
	\paragraph{Rappresentazione matriciale per sistemi lineari} Come osservato in precedenza, i sistemi lineari possono 
	
	
	
	
	
	
	
	
	
	
	
	
	
	